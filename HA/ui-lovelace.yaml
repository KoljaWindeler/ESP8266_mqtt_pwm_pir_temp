name: My Awesome Home
resources:
  - url: /local/monster-card.js
    type: js
  - url: /local/group-card.js
    type: js
  - url: /local/long-term-card-bundle.js
    type: module
  - url: /community_plugin/custom-header/custom-header.js
    type: module
  - url: /community_plugin/mini-media-player/mini-media-player-bundle.js
    type: module
  - url: /community_plugin/secondaryinfo-entity-row/secondaryinfo-entity-row.js
    type: js
  - url: /community_plugin/lovelace-card-tools/card-tools.js
    type: module
  - url: /community_plugin/lovelace-template-entity-row/template-entity-row.js
    type: module
  - url: /community_plugin/lovelace-card-mod/card-mod.js
    type: module
  - url: /community_plugin/button-card/button-card.js
    type: module
  - url: /community_plugin/lovelace-home-feed-card/lovelace-home-feed-card.js
    type: js
  - url: /community_plugin/text-divider-row/text-divider-row.js
    type: module

background: >-
  center / cover no-repeat
  url("/local/background4.jpg")
  fixed

swipe_nav: 
   wrap: false 
   animate: flip

custom_header:
  shadow: true
  split_mode: true
  compact_mode: true
  header_text: >-
        <center>
        <ha-icon icon='mdi:weather-{% if is_state("weather.dark_sky", "partlycloudy") -%}partly-cloudy{%- else -%}{{ states('weather.dark_sky')}}{%- endif %}'></ha-icon> {{states.weather.dark_sky.attributes.temperature }}Â° 
        | 
        {{ hours24LZ }}:{{ minutesLZ }}
        | 
        {{ dayNumLZ }}.{{ monthNumLZ }}.
        </center>
  exceptions:
    - conditions:
        media_query: "(max-width: 600px)"
      config:
        voice_hide: true 
        chevrons: false



views:
  - theme: dark-mode
#################################################
############## home #########################
#################################################
    cards:
### 1st column
#### 2x big
      - type: vertical-stack
        cards:
         - type: horizontal-stack
           cards:
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.joiner_livingroom
               icon: 'mdi:sofa'
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.joiner_kitchen
               icon: 'mdi:pot-mix'
#### if message, show message
         - type: conditional
           conditions: 
              - entity: sensor.error
                state_not: " "
           card:
              type: vertical-stack
              cards:
               - type: custom:home-feed-card
                 title: 
                 style: | 
                   ha-card { 
                     background-color: darkred; 
                   }
                 show_empty: false
                 more_info_on_tap: true
                 entities:
                  - entity: sensor.error
                    content_template: '{{state}}'
                    include_history: true
                    icon: mdi:alert-circle-outline
                    exclude_states: " "
                    max_history: 3
                    remove_repeats: false
               - type: entities
                 entities:
                   - entity: input_boolean.clear_error
                     name: "Close error log"
                 show_header_toggle: false
                 style: | 
                   ha-card { 
                     background-color: darkred; 
                   }
###########
#### else music quick and camera
         - type: conditional
           conditions: 
              - entity: sensor.error
                state: " "
           card: 
              type: vertical-stack
              cards:
                 - type: horizontal-stack
                   cards:
                    - icon: 'mdi:power'
                      name: ' '
                      service: script.turn_on
                      type: entity-button
                      tap_action:
                        service: script.tvoff
                        action: call-service
                      entity: binary_sensor.always_on
                    - icon: 'mdi:volume-minus'
                      name: ' '
                      service: script.turn_on
                      type: entity-button
                      tap_action:
                        service: script.yamaha_vol_down
                        action: call-service
                      entity: binary_sensor.harmony
                    - icon: 'mdi:volume-plus'
                      name: ' '
                      service: script.turn_on
                      type: entity-button
                      tap_action:
                        service: script.yamaha_vol_up
                        action: call-service
                      entity: binary_sensor.harmony
                    - icon: 'mdi:cast-connected'
                      name: ' '
                      service: script.turn_on
                      type: entity-button
                      tap_action:
                        service: script.start_chromaudio
                        action: call-service
                      entity: binary_sensor.always_on
                 - type: custom:mini-media-player
                   entity: media_player.gmusic_player
                   icon: mdi:google-play
                   hide:
                     volume: true
                     source: true
                     power_state: false
                 - type: picture-entity
                   entity: camera.cam_xia4
                   name: Carlo

### 2nd column
      - type: vertical-stack
        cards:
#### 2x big temp
         - type: horizontal-stack
           cards:
             - detail: 2
               graph: line
               entity: sensor.dev1_temperature
               name: Livingroom
               type: sensor 
             - detail: 2
               graph: line
               entity: sensor.dark_sky_temperature
               name: Outside
               type: sensor 


         - type: horizontal-stack
           cards:
             - type: custom:long-term-card
               name: 'Power Month'
               display_mode: 'diff'
               lower_bound: 8
               upper_bound: 20
               formater: 'yyyy-mm-dd'
               maxDays: 30
               data_delimiter: ','
               unit: 'kWh'
               entities:
                - sensor.long_term_power
             - detail: 2
               graph: line
               entity: sensor.dev16_em_cur
               name: House Power
               type: sensor 
#### safety state
         - type: entities
           show_header_toggle: false
           entities:
             - entity: binary_sensor.g_motion
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_t ]]"
               icon: mdi:security
             - entity: binary_sensor.g_motion_upstairs
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_upstairs_t ]]"
               icon: mdi:home-floor-1
             - entity: binary_sensor.g_motion_basement
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_basement_t ]]"
               icon: mdi:home-floor-0
             - entity: binary_sensor.g_motion_cellar
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_cellar_t ]]"
               icon: mdi:home-floor-negative-1

### 3rd column
#### 1st line, Carlo + bedroom
      - type: vertical-stack
        cards:
         - type: horizontal-stack
           cards:
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev56
               icon: mdi:chart-bubble
#               icon: mdi:string-light
               name: Lampin C
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev33
               name: Carlo Tower
               icon: mdi:lighthouse
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev23
               name: Carlo Main
               icon: mdi:ceiling-light
#### 2nd line
         - type: horizontal-stack
           cards:
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev55
               icon: mdi:chart-bubble
               name: Lampin L.
             - type: entity-button
               tap_action:
                 action: toggle
               name: L. main
               icon: mdi:ceiling-light
               entity: light.dev24
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev19
               icon: mdi:baby
               name: Crip
#### 3rd line
         - type: horizontal-stack
           cards:
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev5
               name: Table
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev54_2
               icon: mdi:ceiling-light
               name: Foyer
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.joiner_bedroom
               name: Bedroom
#### 4th line
         - type: horizontal-stack
           cards:
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev59
               icon: mdi:home-floor-negative-1
               name: Cellar
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev2
             - type: entity-button
               tap_action:
                 action: toggle
               icon: mdi:coach-lamp
               name: Entrance
               entity: light.dev54_4
#### device tracker
         - type: horizontal-stack
           cards:
             - type: picture-entity
               entity: device_tracker.illuminum_kolja
               state_image:
                  "home": /local/kolja.jpg
               image: /local/kolja_sw.jpg
               show_name: false
             - type: picture-entity
               entity: device_tracker.illuminum_caro
               image: /local/carlo.jpg
               show_name: false
             - type: picture-entity
               entity: device_tracker.illuminum_caro
               state_image:
                  "home": /local/caro.jpg
               image: /local/caro_sw.jpg
               show_name: false


#          - type: picture-entity
#            entity: camera.cam_xia1
#            name: L.
    icon: 'mdi:home-assistant'

#################################################
########### all room glance ###########
#################################################

  - cards:
##### upstairs
      - type: vertical-stack
        cards:

        - type: 'custom:text-divider-row'
          style: | 
             secondary-text-color: '#2980b9'
          text: Upstairs

        - type: glance
          title: Hallway upstairs
          entities:
            - entity: binary_sensor.dev57_motion
              name: Motion
            - entity: binary_sensor.0x00158d0002f0bc08_occupancy
              name: "Motion Z"
            - entity: light.dev57
              tap_action:
                action: toggle
              name: Lampion
            - entity: light.dev27
              tap_action:
                action: toggle
              name: Stairway

        - type: glance
          title: Bedroom
          entities:
            - entity: sensor.0x00158d00042505f7_humidity
              name: Hum Z
            - entity: sensor.0x00158d00042505f7_temperature
              name: Temp Z
            - entity: sensor.dev32_temperature
              name: Temp
            - entity: light.dev32
              name: Kolja
              tap_action:
                action: toggle
            - entity: light.dev31
              tap_action:
                action: toggle
              name: Caro
            - entity: light.dev19
              tap_action:
                action: toggle
              name: Crip
            - entity: light.dev26
              tap_action:
                action: toggle
              name: Main
              icon: mdi:ceiling-light
            - entity: switch.dev26_gpio_15
              tap_action:
                action: toggle
              name: Vent
              icon: "mdi:fan"

        - type: glance
          title: Carlo
          entities:
            - entity: sensor.carlo_humidity
              name: Hum Z
            - entity: sensor.carlo_temperature
              name: Temp Z
            - entity: light.dev23
              tap_action:
                action: toggle
              name: Main
              icon: mdi:ceiling-light
            - entity: light.dev33
              tap_action:
                action: toggle
              name: Tower
              icon: mdi:lighthouse
            - entity: light.dev56
              tap_action:
                action: toggle
              name: Lampion
            - entity: input_boolean.carlo_switch_lock
              tap_action:
                action: toggle
              name: Carlo lock
            - entity: camera.cam_xia4
              name: Camera

        - type: glance
          title: L.
          entities:
            - entity: sensor.0x00158d00041024ef_humidity
              name: Hum Z
            - entity: sensor.0x00158d00041024ef_temperature
              name: Temp Z
            - entity: sensor.dev55_temperature
              name: Temp
            - entity: camera.cam_xia1
              name: Camera
            - entity: light.dev24
              tap_action:
                action: toggle
              name: Main
              icon: mdi:ceiling-light
            - entity: light.dev55
              tap_action:
                action: toggle
              name: Lampion

##### basement
      - type: vertical-stack
        cards:

        - type: 'custom:text-divider-row'
          text: Basement

        - type: glance
          title: Foyer
          entities:
            - entity: sensor.foyer_humidity
              name: Hum Z
            - entity: sensor.foyer_temperature
              name: Temp Z
            - entity: light.dev54_2
              tap_action:
                action: toggle
            - entity: binary_sensor.dev54_motion_1
              name: Motion C
            - entity: binary_sensor.dev9_gpio_4
              name: Motion
            - entity: binary_sensor.dev9_gpio_5
              name: Motion D
            - entity: light.dev9
              tap_action:
                action: toggle
              name: Dresser

        - type: glance
          title: Livingarea
          entities: 
            - entity: sensor.livingroom_humidity
              name: Hum Z
            - entity: sensor.livingroom_temperature
              name: Temp Z
            - entity: light.dev1
              tap_action:
                action: toggle
            - entity: light.dev2
              tap_action:
                action: toggle
            - entity: light.dev3
              tap_action:
                action: toggle
              icon: mdi:bowl
              name: Rack
            - entity: light.dev5
              tap_action:
                action: toggle
              name: Table
            - entity: light.dev7
              icon: mdi:lighthouse
              tap_action:
                action: toggle
            - entity: light.dev11
              icon: mdi:lighthouse
              tap_action:
                action: toggle
            - entity: light.dev12
              tap_action:
                action: toggle
            - entity: light.dev14
              tap_action:
                action: toggle
            - entity: light.dev15
              tap_action:
                action: toggle
            - binary_sensor.dev15_motion
#          - binary_sensor.dev14_motion

        - type: glance
          title: Bathroom B.
          entities: 
            - entity: sensor.0x00158d00041d6d95_humidity
              name: Hum Z
            - entity: sensor.0x00158d00041d6d95_temperature
              name: Temp Z

        - type: glance
          title: Caro
          entities: 
            - entity: sensor.0x00158d00044af1b0_humidity
              name: Hum Z
            - entity: sensor.0x00158d00044af1b0_temperature
              name: Temp Z


##### cellar
      - type: vertical-stack
        cards:

        - type: 'custom:text-divider-row'
          text: Cellar

        - type: glance
          title: Cellar Hallway
          entities:
            - entity: sensor.dev59_temperature
              name: Temp
            - entity: light.dev59
              tap_action:
                action: toggle
              name: Main
            - entity: binary_sensor.dev59_motion_13
              name: Down
            - entity: binary_sensor.dev59_motion_16
              name: Down 2
            - entity: binary_sensor.dev54_motion_2
              name: Up
          

        - type: glance
          title: Supply
          entities:
            - entity: sensor.0x00158d00041dfcce_humidity
              name: Hum Z
            - entity: sensor.0x00158d00041dfcce_temperature
              name: Temp Z
            - entity: sensor.dhcp_master_kb_sec_received
              name: Download
            - entity: sensor.dhcp_master_kb_sec_sent
              name: Upload
            - sensor.dev16_em_cur


        - type: glance
          title: Cellar Bathroom
          entities:
            - sensor.dev13_adc

        - type: glance
          title: Movieroom
          entities:
            - entity: sensor.beamer_humidity
              name: Hum Z
            - entity: sensor.beamer_temperature
              name: Temp Z
            - entity: light.dev10
              tap_action:
                action: toggle
              name: LEDs
            - entity: switch.dev25_gpio_4
              tap_action:
                action: toggle
              name: Main
            - entity: switch.dev60_gpio_12
              icon: "mdi:air-filter"
              tap_action:
                action: toggle
              name: Vent
            - entity: switch.dev60_gpio_13
              icon: "mdi:door-open"
              tap_action:
                action: toggle
              name: Window

        - type: glance
          title: Backdoor
          entities:
            - entity: binary_sensor.dev17_motion
              name: Door

        - type: glance
          title: Workshop
          entities:
            - entity: sensor.0x00158d00044b00e0_humidity 
              name: Hum Z
            - entity: sensor.0x00158d00044b00e0_temperature
              name: Temp Z
            - entity: light.dev20
              tap_action:
                action: toggle
              name: Main
            - entity: light.dev28
              tap_action:
                action: toggle
              name: Bench
            - entity: switch.dev28_gpio_15
              tap_action:
                action: toggle
              name: Ventilaton
            - entity: switch.dev28_gpio_4
              tap_action:
                action: toggle
              name: Window

          
        - type: glance
          title: Heater
          entities:
            - entity: sensor.dev4_humidity
              name: Humidity
            - entity: switch.dev4_gpio_12
              name: Pump
              tap_action:
                action: toggle
            - entity:  switch.dev29_gpio_4
              name: Emu
              tap_action:
                action: toggle
            - entity: sensor.dev29_temperature
              name: Water
            - entity: switch.dev4_gpio_5
              tap_action:
                action: toggle
              name: Ventilaton
          
##### Outdoor
      - type: vertical-stack
        cards:
        - type: 'custom:text-divider-row'
          text: Outdoor
        - type: glance
          title: House
          entities:
            - entity: sensor.outside_humidity
              name: Hum Z
            - entity: sensor.outside_temperature
              name: Temp Z
            - entity: camera.cam_xia3
              name: Garage
            - entity: light.dev54_3
              tap_action:
                action: toggle
              name: Corner
            - entity: light.dev54_4
              tap_action:
                action: toggle
              name: Door
            - entity: light.dev18
              tap_action:
                action: toggle
            - entity: camera.cam_dome1
              name: Front
          
        - type: glance
          title: Garage
          entities:
            - entity: sensor.dev8_temperature
              name: Temp
            - entity: switch.dev8
            - entity: binary_sensor.dev8_motion
              name: Motion

        - type: glance
          title: Garden
          entities:
            - entity: sensor.dev30_state
            - entity: switch.dev4_gpio_12
            - entity: switch.dev30_gpio_2
            - entity: switch.dev30_gpio_16
            - entity: switch.dev30_gpio_4
            - entity: switch.dev30_gpio_5
            - entity: switch.dev30_gpio_15
            - entity: sensor.dev30_uptime

    icon: 'mdi:floor-plan'
    title: All rooms

#################################################
############# cams ##########################
#################################################

  - cards:
      - type: picture-entity
        entity: camera.cam_dome1
        camera_view: live
        name: Door
      - type: picture-entity
        entity: camera.cam_xia3
        camera_view: live
        name: Garage
      - type: picture-entity
        entity: camera.cam_xia1
        camera_view: live
        name: L.
#      - type: picture-entity
#        entity: camera.cam_xia5
#        camera_view: live
#      - type: horizontal-stack
#        cards:
#          - icon: 'mdi:arrow-left-bold'
#            name: ' '
#            type: entity-button
#            entity: switch.camxia5_left
#          - icon: 'mdi:arrow-up-bold'
#            name: ' '
#            type: entity-button
#            entity: switch.camxia5_up
#          - icon: 'mdi:arrow-down-bold'
#            name: ' '
#            type: entity-button
#            entity: switch.camxia5_down
#          - icon: 'mdi:arrow-right-bold'
#            name: ' '
#            type: entity-button
#            entity: switch.camxia5_right
#      - type: picture-entity
#        entity: camera.cam_xia1
#      - type: picture-entity
#        entity: camera.cam_xia2
#        camera_view: live
      - type: picture-entity
        entity: camera.cam_xia4
        camera_view: live
        name: Carlo
#      - type: picture-entity
#        entity: camera.cam_xia52
#        camera_view: live
#      - type: picture-entity
#        entity: camera.pi103
#      - type: picture-entity
#        entity: camera.pi106
    icon: 'mdi:cctv'
    title: Cams

#################################################
################ media control #######################
#################################################

  - cards:
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - icon: 'mdi:power'
                name: All
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.tvoff
                  action: call-service
                entity: binary_sensor.always_on
              - icon: 'mdi:fire'
                name: FireTV
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.start_fire
                  action: call-service
                entity: binary_sensor.always_on
              - icon: 'mdi:cast-connected'
                name: Ch TV
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.start_chrom
                  action: call-service
                entity: binary_sensor.always_on
              - icon: 'mdi:cast-connected'
                name: Ch Audio
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.start_chromaudio
                  action: call-service
                entity: binary_sensor.always_on
          - type: horizontal-stack
            cards:
              - icon: 'mdi:menu'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.firehome
                  action: call-service
                entity: binary_sensor.harmony
              - icon: 'mdi:arrow-up-bold'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.fireup
                  action: call-service
                entity: binary_sensor.harmony
              - icon: 'mdi:volume-plus'
                name: Amp
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.yamaha_vol_up_2
                  action: call-service
                entity: binary_sensor.harmony
              - icon: 'mdi:arrow-up-bold'
                name: TV
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.tvup
                  action: call-service
                entity: binary_sensor.harmony
          - type: horizontal-stack
            cards:
              - icon: 'mdi:arrow-left-bold'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.fireleft
                  action: call-service
                entity: binary_sensor.harmony
              - icon: 'mdi:check-circle'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.fireok
                  action: call-service
                entity: binary_sensor.harmony
              - icon: 'mdi:arrow-right-bold'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.fireright
                  action: call-service
                entity: binary_sensor.harmony
              - icon: 'mdi:music-circle'
                name: TheBuzz
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.the_buzz
                  action: call-service
                entity: binary_sensor.always_on
          - type: horizontal-stack
            cards:
              - icon: 'mdi:volume-mute'
                name: AMP
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.tvmute
                  action: call-service
                entity: binary_sensor.harmony
              - icon: 'mdi:arrow-down-bold'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.firedown
                  action: call-service
                entity: binary_sensor.harmony
              - icon: 'mdi:volume-minus'
                name: AMP
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.yamaha_vol_down_2
                  action: call-service
                entity: binary_sensor.harmony
              - icon: 'mdi:arrow-down-bold'
                name: TV
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.tvdown
                  action: call-service
                entity: binary_sensor.harmony
      - type: horizontal-stack
        cards:
         - type: entity-button
           tap_action:
             action: toggle
           entity: switch.dev58_gpio_12
           icon: 'mdi:download-network'
           name: MediaPC
         - type: entity-button
           tap_action:
             action: toggle
           entity: light.dev10
      - type: horizontal-stack
        cards:
         - icon: 'mdi:laptop'
           name: BeamerPc
           service: script.turn_on
           type: entity-button
           tap_action:
             service: script.start_beamer
             action: call-service
           entity: binary_sensor.always_on
         - icon: 'mdi:power'
           name: BeamerOff
           service: script.turn_on
           type: entity-button
           tap_action:
             service: script.beameroff
             action: call-service
           entity: binary_sensor.harmony_beamer
      - type: media-control
        entity: media_player.gmusic_player
      - type: media-control
        entity: media_player.jkw_cast2
      - type: custom:group-card
        card:
           type: entities 
           title: GMusic
        group: group.google_music_media_player
        show_header_toggle: false
    icon: 'mdi:cast-connected'
    title: Media

#################################################
############## weather #########################
#################################################

  - cards:
      - type: vertical-stack
        cards:
        - type: horizontal-stack
          cards:
           - entity: sensor.outside_humidity
             name: Outside
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.bathroom_u_humidity
             name: Bathroom U.
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.carlo_humidity
             name: Carlo
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
        - type: horizontal-stack
          cards:
           - entity: sensor.beamer_humidity
             name: Beamer
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.livingroom_humidity
             type: gauge
             name: Livingroom
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.foyer_humidity
             type: gauge
             name: Foyer
             severity:
               green: 0
               yellow: 0
               red: 60
        - type: horizontal-stack
          cards:
           - entity: sensor.0x00158d00041024ef_humidity
             name: L
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.0x00158d00041dfcce_humidity
             type: gauge
             name: Supply
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.0x00158d00042505f7_humidity
             type: gauge
             name: Bedroom
             severity:
               green: 0
               yellow: 0
               red: 60
        - type: horizontal-stack
          cards:
           - entity: sensor.0x00158d00041d6d95_humidity
             name: Bathroom B.
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.0x00158d00044af1b0_humidity
             type: gauge
             name: Caro
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.0x00158d00044b00e0_humidity
             type: gauge
             name: Workshop
             severity:
               green: 0
               yellow: 0
               red: 60

      - type: entities
        entities:
         - entity: sensor.bathroom_u_temperature
           name: "Bathroom"
         - entity: sensor.carlo_temperature
           name: "Carlo"
         - entity: sensor.dev32_temperature
           name: "Bedroom"
         - entity: sensor.0x00158d00042505f7_temperature
           name: "Bedroom Z"
         - entity: sensor.dev55_temperature
           name: "L."
         - entity: sensor.0x00158d00041024ef_temperature
           name: "L. Z"
         - type: divider
         - entity: sensor.livingroom_temperature
           name: "Livingroom"
         - entity: sensor.dev1_temperature
           name: "Livingroom 2"
         - entity: sensor.dev2_temperature
           name: "Livingroom 3"
         - entity: sensor.foyer_temperature
           name: "Foyer"
         - entity: sensor.0x00158d00044af1b0_temperature
           name: "Caro"
         - entity: sensor.0x00158d00041d6d95_temperature
           name: Bathroom B.
         - type: divider
         - entity: sensor.dev59_temperature
           name: "Cellar"
         - entity: sensor.beamer_temperature
           name: "Beamer"
         - entity: sensor.0x00158d00041dfcce_temperature
           name: "Supply"
         - entity: sensor.0x00158d00044b00e0_temperature
           name: "Workshop"
         - type: divider
         - entity: sensor.outside_temperature


      - type: weather-forecast
        entity: weather.dark_sky
      - type: horizontal-stack
        cards:
         - detail: 2
           graph: line
           entity: sensor.outside_temperature
           name: Outside
           type: sensor 
         - detail: 2
           graph: line
           entity: sensor.dev8_temperature
           name: Garage
           type: sensor 

      - type: horizontal-stack
        cards:
         - detail: 2
           graph: line
           entity: sensor.carlo_temperature
           name: Carlo
           type: sensor 
         - detail: 2
           graph: line
           entity: sensor.livingroom_temperature
           name: Livingroom
           type: sensor 
      - type: horizontal-stack
        cards:
         - detail: 2
           graph: line
           entity: sensor.beamer_temperature
           name: Beamer
           type: sensor 
         - detail: 2
           graph: line
           entity: sensor.foyer_temperature
           name: Foyer
           type: sensor 

#      - type: vertical-stack
#        cards:
#         - type: history-graph
#           entities:
#             - sensor.dev59_temperature
#             - sensor.dev1_temperature
#             - sensor.dev2_temperature
#             - sensor.foyer_temperature
#             - sensor.livingroom_temperature
#             - sensor.bathroom_u_temperature
#             - sensor.beamer_temperature
#             - sensor.carlo_temperature
#             - sensor.dev32_temperature
#             - sensor.dev55_temperature

      - type: picture-entity
        entity: camera.cam_weather2
        name: NDS
        camera_view: live
      - type: picture-entity
        entity: camera.cam_weather1
        name: BRD
        camera_view: live
    icon: 'mdi:weather-partly-cloudy'
    title: weather
#################################################
############## security #########################
#################################################
  - cards:
      - type: entities
        show_header_toggle: false
        entities:
          - entity: binary_sensor.sec_short
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.sec_long ]]"
            icon: mdi:lock
          - type: divider
          - input_boolean.alarm_system
          - input_boolean.presents_simulation
          - type: divider
          - binary_sensor.someone_is_home
          - binary_sensor.everyone_is_home
          - entity: device_tracker.illuminum_kolja
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.illuminum_kolja_t ]]"
            icon: mdi:security
          - entity: device_tracker.illuminum_caro
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.illuminum_caro_t ]]"
            icon: mdi:security
        title: Alarm Status
      - type: entities
        show_header_toggle: false
        entities:
          - entity: binary_sensor.g_motion
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.g_motion_t ]]"
            icon: mdi:security
          - entity: binary_sensor.g_motion_upstairs
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.g_motion_upstairs_t ]]"
            icon: mdi:home-floor-1
          - entity: binary_sensor.g_motion_basement
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.g_motion_basement_t ]]"
            icon: mdi:home-floor-0
          - entity: binary_sensor.g_motion_cellar
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.g_motion_cellar_t ]]"
            icon: mdi:home-floor-negative-1
      - type: entities
        show_header_toggle: false
        entities:
          - binary_sensor.dev57_motion
          - entity: binary_sensor.0x00158d0002f0bc08_occupancy
            name: "Hallway U"
          - type: divider
#          - binary_sensor.dev14_motion
          - entity: binary_sensor.dev54_motion_1
            name: "Foyer ceiling motion"
          - binary_sensor.dev15_motion
          - binary_sensor.dev9_gpio_4
          - type: divider
          - binary_sensor.dev17_motion
          - entity: binary_sensor.dev54_motion_2
            name: "Cellar stair motion"
          - binary_sensor.dev59_motion_13
          - binary_sensor.dev59_motion_16
          - type: divider
          - binary_sensor.dev8_motion
#          - binary_sensor.dev10_motion
      - type: map
        entities:
          - entity: device_tracker.illuminum_kolja
          - entity: device_tracker.illuminum_caro
          - zone.home
        aspect_ratio: 90%
    icon: 'mdi:security'
    title: Security

#################################################
############ signal ###########################
#################################################

  - cards:
      - type: entities
        title: Update
        show_header_toggle: false
        entities:
          - sensor.dev1_update
          - sensor.dev2_update
          - sensor.dev3_update
          - sensor.dev4_update
          - sensor.dev5_update
#          - sensor.dev6_update
          - sensor.dev7_update
          - sensor.dev8_update
          - sensor.dev10_update
          - sensor.dev11_update
          - sensor.dev12_update
          - sensor.dev13_update
          - sensor.dev14_update
          - sensor.dev15_update
          - sensor.dev16_update
          - sensor.dev17_update
          - sensor.dev18_update
          - sensor.dev19_update
          - sensor.dev20_update
          - sensor.dev21_update
#          - sensor.dev22_update
          - sensor.dev23_update
          - sensor.dev24_update
          - sensor.dev25_update
          - sensor.dev26_update
          - sensor.dev27_update
          - sensor.dev28_update
          - sensor.dev29_update
          - sensor.dev30_update
          - sensor.dev31_update
          - sensor.dev32_update
          - sensor.dev33_update
          - sensor.dev54_update
          - sensor.dev55_update
          - sensor.dev56_update
          - sensor.dev57_update
          - sensor.dev58_update
          - sensor.dev59_update
      - type: entities
        title: Rssi
        show_header_toggle: false
        entities:
          - sensor.dev1_rssi
          - sensor.dev2_rssi
          - sensor.dev3_rssi
          - sensor.dev4_rssi
          - sensor.dev5_rssi
#          - sensor.dev6_rssi
          - sensor.dev7_rssi
          - sensor.dev8_rssi
          - sensor.dev10_rssi
          - sensor.dev11_rssi
          - sensor.dev12_rssi
          - sensor.dev13_rssi
          - sensor.dev14_rssi
          - sensor.dev15_rssi
          - sensor.dev16_rssi
          - sensor.dev17_rssi
          - sensor.dev18_rssi
          - sensor.dev19_rssi
          - sensor.dev20_rssi
          - sensor.dev21_rssi
#          - sensor.dev22_rssi
          - sensor.dev23_rssi
          - sensor.dev24_rssi
          - sensor.dev25_rssi
          - sensor.dev26_rssi
          - sensor.dev27_rssi
          - sensor.dev28_rssi
          - sensor.dev29_rssi
          - sensor.dev30_rssi
          - sensor.dev31_rssi
          - sensor.dev32_rssi
          - sensor.dev33_rssi
          - sensor.dev54_rssi
          - sensor.dev55_rssi
          - sensor.dev56_rssi
          - sensor.dev57_rssi
          - sensor.dev58_rssi
          - sensor.dev59_rssi
      - type: entities
        show_header_toggle: false
        entities:
          - sensor.dev1_info
          - sensor.dev2_info
          - sensor.dev3_info
          - sensor.dev4_info
          - sensor.dev5_info
#          - sensor.dev6_info
          - sensor.dev7_info
          - sensor.dev8_info
          - sensor.dev10_info
          - sensor.dev11_info
          - sensor.dev12_info
          - sensor.dev13_info
          - sensor.dev14_info
          - sensor.dev15_info
          - sensor.dev16_info
          - sensor.dev17_info
          - sensor.dev18_info
          - sensor.dev19_info
          - sensor.dev20_info
          - sensor.dev21_info
#          - sensor.dev22_info
          - sensor.dev23_info
          - sensor.dev24_info
          - sensor.dev25_info
          - sensor.dev26_info
          - sensor.dev27_info
          - sensor.dev28_info
          - sensor.dev29_info
          - sensor.dev30_info
          - sensor.dev31_info
          - sensor.dev32_info
          - sensor.dev33_info
          - sensor.dev54_info
          - sensor.dev55_info
          - sensor.dev56_info
          - sensor.dev57_info
          - sensor.dev58_info
          - sensor.dev59_info
        title: Info
#      - type: entities
#        show_header_toggle: false
#        entities:
#          - sensor.dev1_bssid
#          - sensor.dev2_bssid
#          - sensor.dev3_bssid
#          - sensor.dev4_bssid
#          - sensor.dev5_bssid
#          - sensor.dev6_bssid
#          - sensor.dev7_bssid
#          - sensor.dev8_bssid
#          - sensor.dev10_bssid
#          - sensor.dev11_bssid
#          - sensor.dev12_bssid
#          - sensor.dev13_bssid
#          - sensor.dev14_bssid
#          - sensor.dev15_bssid
#          - sensor.dev16_bssid
#          - sensor.dev17_bssid
#          - sensor.dev18_bssid
#          - sensor.dev19_bssid
#          - sensor.dev20_bssid
#          - sensor.dev21_bssid
#          - sensor.dev22_bssid
#          - sensor.dev23_bssid
#          - sensor.dev24_bssid
#          - sensor.dev25_bssid
#          - sensor.dev26_bssid
#          - sensor.dev27_bssid
#          - sensor.dev28_bssid
#          - sensor.dev29_bssid
#          - sensor.dev30_bssid
#          - sensor.dev31_bssid
#          - sensor.dev32_bssid
#          - sensor.dev54_bssid
#          - sensor.dev55_bssid
#          - sensor.dev56_bssid
#          - sensor.dev57_bssid
#          - sensor.dev58_bssid
#          - sensor.dev59_bssid
#        title: Bssid
      - type: entities
        show_header_toggle: false
        entities:
          - sensor.dev1_ssid
          - sensor.dev2_ssid
          - sensor.dev3_ssid
          - sensor.dev4_ssid
          - sensor.dev5_ssid
#          - sensor.dev6_ssid
          - sensor.dev7_ssid
          - sensor.dev8_ssid
          - sensor.dev10_ssid
          - sensor.dev11_ssid
          - sensor.dev12_ssid
          - sensor.dev13_ssid
          - sensor.dev14_ssid
          - sensor.dev15_ssid
          - sensor.dev16_ssid
          - sensor.dev17_ssid
          - sensor.dev18_ssid
          - sensor.dev19_ssid
          - sensor.dev20_ssid
          - sensor.dev21_ssid
#          - sensor.dev22_ssid
          - sensor.dev23_ssid
          - sensor.dev24_ssid
          - sensor.dev25_ssid
          - sensor.dev26_ssid
          - sensor.dev27_ssid
          - sensor.dev28_ssid
          - sensor.dev29_ssid
          - sensor.dev30_ssid
          - sensor.dev31_ssid
          - sensor.dev32_ssid
          - sensor.dev33_ssid
          - sensor.dev54_ssid
          - sensor.dev55_ssid
          - sensor.dev56_ssid
          - sensor.dev57_ssid
          - sensor.dev58_ssid
          - sensor.dev59_ssid
        title: SSID
      - type: entities
        show_header_toggle: false
        entities:
          - sensor.dev1_capability
          - sensor.dev2_capability
          - sensor.dev3_capability
          - sensor.dev4_capability
          - sensor.dev5_capability
#          - sensor.dev6_capability
          - sensor.dev7_capability
          - sensor.dev8_capability
          - sensor.dev10_capability
          - sensor.dev11_capability
          - sensor.dev12_capability
          - sensor.dev13_capability
          - sensor.dev14_capability
          - sensor.dev15_capability
          - sensor.dev16_capability
          - sensor.dev17_capability
          - sensor.dev18_capability
          - sensor.dev19_capability
          - sensor.dev20_capability
          - sensor.dev21_capability
#          - sensor.dev22_capability
          - sensor.dev23_capability
          - sensor.dev24_capability
          - sensor.dev25_capability
          - sensor.dev26_capability
          - sensor.dev27_capability
          - sensor.dev28_capability
          - sensor.dev29_capability
          - sensor.dev30_capability
          - sensor.dev31_capability
          - sensor.dev32_capability
          - sensor.dev33_capability
          - sensor.dev54_capability
          - sensor.dev55_capability
          - sensor.dev56_capability
          - sensor.dev57_capability
          - sensor.dev58_capability
          - sensor.dev59_capability
        title: Capability
    icon: 'mdi:signal-variant'
    title: Signals

#################################################
########### Utilities ###########################
#################################################

  - cards:
#      - type: entities
#        entities:
#          - light.dev54_3
#          - light.dev54_4
#          - light.dev18
#        show_header_toggle: false
#        title: Outside light
      - type: entities
        entities:
          - vacuum.xiaomi_vacuum_cleaner
          - vacuum.xiaomi_vacuum_cleaner_2
          - input_boolean.cleaning_done_today_0
          - input_boolean.cleaning_done_today_1
          - sensor.vac_triggered_0
          - sensor.vac_triggered_1
          - input_boolean.autostart_cleaning
        show_header_toggle: false
        title: Vacuuming
      - type: history-graph
        entities:
          - sensor.dev29_temperature
      - type: entities
        entities:
          - sensor.trash_0
          - sensor.trash_1
          - sensor.trash_2
        title: Trash
      - type: entities
        entities:
          - input_boolean.irrigation
          - input_boolean.irrigation_override
          - sensor.dev30_state
          - switch.dev4_gpio_12
          - switch.dev30_gpio_2
          - switch.dev30_gpio_16
          - switch.dev30_gpio_4
          - switch.dev30_gpio_5
          - switch.dev30_gpio_15
          - sensor.dev30_uptime
          - sensor.dark_sky_daytime_high_temperature_0d
        show_header_toggle: false
        title: Water
    icon: 'mdi:tools'
    title: Tools
#################################################
########### POWER ###############################
#################################################
  - cards:
      - detail: 2
        graph: line
        entity: sensor.dev16_em_cur
        name: EM current
        type: sensor 
      - type: custom:long-term-card
        name: 'Energy Month / Day'
        display_mode: 'diff'
        formater: 'yyyy-mm-dd'
        lower_bound: 0
        upper_bound: 25
        maxDays: 30
        data_delimiter: ','
        unit: 'kWh'
        entities:
         - sensor.long_term_power
#        color_thresholds:
#            - value: 12
#              color: "#fcca04"
#            - value: 14
#              color: "#ff8080"
      - type: custom:long-term-card
        name: 'Energy Year / Day'
        display_mode: 'diff'
        formater: 'yyyy-mm-dd'
        unit: 'kWh'
        lower_bound: 0
        upper_bound: 25
        maxDays: 365
        data_delimiter: ','
        entities:
         - sensor.long_term_power

      - type: vertical-stack
        cards:
        - type: horizontal-stack
          cards:
           - entity: sensor.outside_battery
             name: Outside
             type: gauge
             severity:
               green: 50
               yellow: 30
               red: 10
           - entity: sensor.bathroom_u_battery
             name: Bathroom U.
             type: gauge
             severity:
               green: 50
               yellow: 30
               red: 10
           - entity: sensor.carlo_battery
             name: Carlo
             type: gauge
             severity:
               green: 50
               yellow: 30
               red: 10
        - type: horizontal-stack
          cards:
           - entity: sensor.beamer_battery
             name: Beamer
             type: gauge
             severity:
               green: 50
               yellow: 30
               red: 10
           - entity: sensor.livingroom_battery
             type: gauge
             name: Livingroom
             severity:
               green: 50
               yellow: 30
               red: 10
           - entity: sensor.foyer_battery
             type: gauge
             name: Foyer
             severity:
               green: 50
               yellow: 30
               red: 10
        - type: horizontal-stack
          cards:
           - entity: sensor.0x00158d00041024ef_battery
             name: L
             type: gauge
             severity:
               green: 50
               yellow: 30
               red: 10
           - entity: sensor.0x00158d00041dfcce_battery
             type: gauge
             name: Supply
             severity:
               green: 50
               yellow: 30
               red: 10
           - entity: sensor.0x00158d00042505f7_battery
             type: gauge
             name: Bedroom
             severity:
               green: 50
               yellow: 30
               red: 10
        - type: horizontal-stack
          cards:
           - entity: sensor.0x00158d00041d6d95_battery
             name: Bathroom B.
             type: gauge
             severity:
               green: 50
               yellow: 30
               red: 10
           - entity: sensor.0x00158d00044af1b0_battery
             type: gauge
             name: Caro
             severity:
               green: 50
               yellow: 30
               red: 10
           - entity: sensor.0x00158d00044b00e0_battery
             type: gauge
             name: Workshop
             severity:
               green: 50
               yellow: 30
               red: 10


    icon: 'mdi:power-plug'
    title: power
#################################################
########## upstairs #############################
#################################################
  - cards:
      - type: custom:group-card
        card:
           type: entities 
           title: Switch on IOT1
        group: group.iot1_switch

      - type: custom:group-card
        card:
           type: entities 
           title: Light on IOT1
        group: group.iot1_light

    icon: 'mdi:home-floor-1'
    title: upstairs
#################################################
############ basement ###########################
#################################################
  - cards:
      - type: custom:group-card
        card:
           type: entities 
           title: Switch on IOT0
        group: group.iot0_switch

      - type: custom:group-card
        card:
           type: entities 
           title: Light on IOT0
        group: group.iot0_light

    icon: 'mdi:home-floor-0'
    title: basement
#################################################
########## cellar ###############################
#################################################
  - cards:
      - detail: 2
        graph: line
        entity: sensor.dev4_humidity
        name: Cellar Humidity
        type: sensor 
      - detail: 2
        graph: line
        entity: sensor.dev4_humidity_stat_mean
        name: Cellar Humidity
        type: sensor 
      - entities: 
          - switch.dev4_gpio_5
        title: Dryroom Ventilation
        type: history-graph

      - type: horizontal-stack
        cards:
          - type: entity-button
            tap_action:
              action: toggle
            entity: switch.dev28_countdown
            icon: 'mdi:clock'
            name: Shop Ventilation
          - entity: sensor.dev28_countdown_state
            name: Countdown
            type: gauge
            max: 30

      - type: custom:group-card
        card:
           type: entities 
           title: Switch on IOT255
        group: group.iot255_switch

      - type: custom:group-card
        card:
           type: entities 
           title: Light on IOT255
        group: group.iot255_light

    icon: 'mdi:home-floor-negative-1'
    title: cellar
#################################################
######## All lights #############################
#################################################
  - cards:
     - show_empty: true
       card:
         type: entities
         title: All lights
       filter:
         include:
           - domain: light
       type: 'custom:monster-card'
     - show_empty: true
       card:
         type: entities
         title: All switches
       filter:
         include:
           - domain: switch
       type: 'custom:monster-card'
    icon: 'mdi:settings'
    title: All lights
#################################################
########## TESTING ##############################
#################################################

  - cards:
      - detail: 2
        graph: line
        entity: sensor.dev13_adc
        name: leakage
        type: sensor 
      - detail: 2
        graph: line
        entity: sensor.dhcp_master_kb_sec_received
        name: Download
        type: sensor 
      - detail: 2
        graph: line
        entity: sensor.tankerkoenig_005056ba_7cb6_1ed2_bceb_504b1b68ad12_e5
        name: E5 Sprit
        type: sensor 
      - type: entities
        entities:
          - input_boolean.approx_warn
        show_header_toggle: false

      - type: entity-button
        entity: binary_sensor.0x00158d0002f0bc08_occupancy
        name: motion zigbee

      - type: entity-button
        tap_action:
          action: toggle
        entity: switch.dev28_gpio_4
        name: Workshop Air
      - type: history-graph
        #title: Linkquality
        entities:
          - sensor.bathroom_u_linkquality
          - sensor.carlo_linkquality
          - sensor.outside_linkquality
          - sensor.beamer_linkquality
          - sensor.livingroom_linkquality
          - sensor.foyer_linkquality
      - type: custom:long-term-card
        name: 'Power Month'
        lower_bound: 0
        upper_bound: 100
        height: 250
        icon: mdi:server
        display_mode: 'abs'
        formater: 'yyyy-mm-dd'
        maxDays: 300
        data_delimiter: ','
        unit: '%'
        entities:
         - entity: sensor.long_term_battery_1
           show_fill: false
           show_graph: true
           show_legend: false
         - entity: sensor.long_term_battery_2
           show_fill: false
           show_legend: false
           show_graph: true
         - entity: sensor.long_term_battery_3
           show_fill: false
           show_legend: false
           show_graph: true
         - entity: sensor.long_term_battery_4
           show_fill: false
           show_legend: false
           show_graph: true
         - entity: sensor.long_term_battery_5
           show_fill: false
           show_legend: false
           show_graph: true
         - entity: sensor.long_term_battery_6
           show_fill: false
           show_legend: false
           show_graph: true


    title: T
#######################################
