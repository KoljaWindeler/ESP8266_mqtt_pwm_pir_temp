name: My Awesome Home

swipe_nav: 
   wrap: false 
   animate: flip


custom_header:
  shadow: true
  split_mode: true
  compact_mode: true
  header_text: >-
        <center>
        <ha-icon icon='mdi:weather-{% if is_state("weather.dark_sky", "partlycloudy") -%}partly-cloudy{%- else -%}{{ states('weather.dark_sky')}}{%- endif %}'></ha-icon> {{ states.sensor.outside_temperature.state }}Â° 
        | 
        {{ hours24LZ }}:{{ minutesLZ }}
        | 
        {{ dayNumLZ }}.{{ monthNumLZ }}.
        </center>
  exceptions:
    - conditions:
        media_query: "(max-width: 600px)"
      config:
        voice_hide: true 
        chevrons: false



views:
  - theme: dark-mode
#################################################
################## home #########################
#################################################
    cards:
### 1st column
#### 2x big
      - type: vertical-stack
        cards:
         - type: horizontal-stack
           cards:
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.joiner_livingroom
               state_color: true
               icon: 'mdi:sofa'
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.joiner_kitchen_livingroom
               name: "Both"
               state_color: true
               icon: 'mdi:arrow-left-right-bold-outline'
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.joiner_kitchen
               state_color: true
               icon: 'mdi:pot-mix'
#### if message, show message
         - type: conditional
           conditions: 
              - entity: sensor.error
                state_not: " "
           card:
              type: vertical-stack
              cards:
               - type: custom:home-feed-card
                 title: 
                 style: | 
                   ha-card { 
                     background-color: darkred; 
                   }
                 show_empty: false
                 more_info_on_tap: true
                 entities:
                  - entity: sensor.error
                    content_template: '{{state}}'
                    include_history: true
                    icon: mdi:alert-circle-outline
                    exclude_states: " "
                    max_history: 3
                    remove_repeats: false
               - type: entities
                 entities:
                   - entity: input_boolean.clear_error
                     name: "Close error log"
                 show_header_toggle: false
                 style: | 
                   ha-card { 
                     background-color: darkred; 
                   }
###########
#### else music quick and camera
         - type: conditional
           conditions: 
              - entity: sensor.error
                state: " "
           card: 
              type: vertical-stack
              cards:
                 - type: horizontal-stack
                   cards:
                    - icon: 'mdi:power'
                      name: ' '
                      service: script.turn_on
                      state_color: true
                      type: entity-button
                      tap_action:
                        service: script.tvoff
                        action: call-service
                      entity: binary_sensor.always_on
                    - icon: 'mdi:volume-minus'
                      name: ' '
                      service: script.turn_on
                      state_color: true
                      type: entity-button
                      tap_action:
                        service: script.yamaha_vol_down
                        action: call-service
                      entity: binary_sensor.harmony
                    - icon: 'mdi:volume-plus'
                      name: ' '
                      service: script.turn_on
                      state_color: true
                      type: entity-button
                      tap_action:
                        service: script.yamaha_vol_up
                        action: call-service
                      entity: binary_sensor.harmony
                    - icon: 'mdi:cast-connected'
                      name: ' '
                      service: script.turn_on
                      type: entity-button
                      state_color: true
                      tap_action:
                        service: script.start_chromaudio
                        action: call-service
                      entity: binary_sensor.always_on
                 - type: custom:mini-media-player
                   entity: media_player.gmusic_player
                   icon: mdi:google-play
                   artwork: cover
                   hide:
                     volume: true
                     source: true
                     power_state: false
#                 - type: picture-entity
#                   entity: camera.cam_xia4
#                   name: Carlo
#### device tracker
                 - type: horizontal-stack
                   cards:
                     - type: picture-entity
                       entity: device_tracker.illuminum_kolja
                       state_image:
                           "home": /local/kolja.jpg
                       image: /local/kolja_sw.jpg
                       show_name: false
                     - type: picture-entity
                       entity: device_tracker.illuminum_caro
                       image: /local/carlo.jpg
                       show_name: false
                     - type: picture-entity
                       entity: device_tracker.illuminum_caro
                       state_image:
                          "home": /local/caro.jpg
                       image: /local/caro_sw.jpg
                       show_name: false



### 2nd column
      - type: vertical-stack
        cards:
#### 2x big temp
         - type: horizontal-stack
           cards:
             - type: custom:mini-graph-card
               name: Livingroom
               entities:
                - sensor.dev1_temperature
#               color_thresholds:
#                 - value: 18
#                   color: "#3b4bff"
#                 - value: 20
#                   color: "#ffc830"
#                 - value: 24
#                   color: "#c0392b"
             - type: custom:mini-graph-card
               name: Outside
               entities:
                - sensor.outside_temperature
 #              color_thresholds:
 #                - value: 10
 #                  color: "#3b4bff"
 #                - value: 15
 #                  color: "#ffc830"
 #                - value: 25
 #                  color: "#c0392b"
         - type: horizontal-stack
           cards:
             - type: custom:long-term-card
               name: 'Power Month'
               display_mode: 'diff'
               lower_bound: 8
               upper_bound: 20
               formater: 'yyyy-mm-dd'
               maxDays: 30
               data_delimiter: ','
               unit: 'kWh'
               entities:
                - sensor.long_term_power
#             - detail: 2
#               graph: line
#               entity: sensor.dev16_em_cur
#               name: House Power
#               type: sensor 
             - type: custom:mini-graph-card
               name: House Power
               smoothing: false
               points_per_hour: 6
               entities:
                - sensor.dev16_em_cur
               color_thresholds:
                 - value: 500
                   color: "#0c7d0e"
                 - value: 2000
                   color: "#d35400"
                 - value: 4000
                   color: "#c0392b"

#### safety state
         - type: entities
           show_header_toggle: false
           entities:
             - entity: binary_sensor.g_motion
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_t ]]"
               icon: mdi:security
               name: Global motion
             - type: divider
             - entity: binary_sensor.g_motion_upstairs
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_upstairs_t ]]"
               icon: mdi:home-floor-1
               name: Upstairs
             - entity: binary_sensor.g_motion_basement
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_basement_t ]]"
               icon: mdi:home-floor-0
               name: Ground floor
             - entity: binary_sensor.g_motion_cellar
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_cellar_t ]]"
               icon: mdi:home-floor-negative-1
               name: Basement

### 3rd column
#### 1st line, Carlo + bedroom
      - type: vertical-stack
        cards:
         - type: horizontal-stack
           cards:
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev56
               icon: mdi:string-lights
               name: Lampin C
               state_color: true
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev33
               name: Carlo Tower
               icon: mdi:lighthouse
               state_color: true
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev23
               name: Carlo Main
               icon: mdi:track-light
               state_color: true
#### 2nd line
         - type: horizontal-stack
           cards:
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev55
               icon: mdi:string-lights
               name: Lampin L
               state_color: true
             - type: entity-button
               tap_action:
                 action: toggle
               name: Louisa main
               icon: mdi:track-light
               entity: light.dev24
               state_color: true
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev19
               icon: mdi:baby
               name: Crip
               state_color: true
#### 3rd line
         - type: horizontal-stack
           cards:
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev5
               name: Table
               state_color: true
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev54_2
               icon: mdi:ceiling-light
               name: Foyer
               state_color: true
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.joiner_bedroom
               icon: mdi:bed-double-outline
               name: Bedroom
               state_color: true
#### 4th line
         - type: horizontal-stack
           cards:
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev59
               icon: mdi:home-floor-negative-1
               name: Cellar
               state_color: true
             - type: entity-button
               tap_action:
                 action: toggle
               entity: light.dev2
               icon: mdi:floor-lamp
               state_color: true
             - type: entity-button
               tap_action:
                 action: toggle
               icon: mdi:floor-lamp-dual
               name: PlayArea
               entity: light.dev34
               state_color: true

#          - type: picture-entity
#            entity: camera.cam_xia1
#            name: Louisa
    icon: 'mdi:home-assistant'

#################################################
########### all room glance ###########
#################################################

  - cards:
##### upstairs
      - type: vertical-stack
        cards:

        - type: 'custom:text-divider-row'
          style: | 
             secondary-text-color: '#2980b9'
          text: Upstairs

        - type: glance
          title: Hallway upstairs
          entities:
            - entity: binary_sensor.dev57_motion
              name: Motion
            - entity: binary_sensor.0x00158d0002f0bc08_occupancy
              name: "Motion Z"
            - entity: light.dev57
              tap_action:
                action: toggle
              name: Lampion
            - entity: light.dev27
              tap_action:
                action: toggle
              name: Stairway

        - type: glance
          title: Bedroom
          entities:
            - entity: sensor.0x00158d00042505f7_humidity
              name: Hum Z
            - entity: sensor.0x00158d00042505f7_temperature
              name: Temp Z
            - entity: sensor.dev32_temperature
              name: Temp
            - entity: light.dev32
              name: Kolja
              tap_action:
                action: toggle
            - entity: light.dev31
              tap_action:
                action: toggle
              name: Caro
            - entity: light.dev19
              tap_action:
                action: toggle
              name: Crip
            - entity: light.dev26
              tap_action:
                action: toggle
              name: Main
              icon: mdi:ceiling-light
            - entity: switch.dev26_gpio_15
              state_color: true
              tap_action:
                action: toggle
              name: Vent
              icon: "mdi:fan"

        - type: glance
          title: Carlo
          entities:
            - entity: sensor.carlo_humidity
              name: Hum Z
            - entity: sensor.carlo_temperature
              name: Temp Z
            - entity: light.dev23
              tap_action:
                action: toggle
              name: Main
              icon: mdi:ceiling-light
            - entity: light.dev33
              tap_action:
                action: toggle
              name: Tower
              icon: mdi:lighthouse
            - entity: light.dev56
              tap_action:
                action: toggle
              name: Lampion
            - entity: input_boolean.carlo_switch_lock
              state_color: true
              tap_action:
                action: toggle
              name: Carlo lock
            - entity: camera.cam_xia4
              name: Camera

        - type: glance
          title: Louisa
          entities:
            - entity: sensor.0x00158d00041024ef_humidity
              name: Hum Z
            - entity: sensor.0x00158d00041024ef_temperature
              name: Temp Z
            - entity: sensor.dev55_temperature
              name: Temp
            - entity: camera.cam_xia1
              name: Camera
            - entity: light.dev24
              tap_action:
                action: toggle
              name: Main
              icon: mdi:ceiling-light
            - entity: light.dev55
              tap_action:
                action: toggle
              name: Lampion

        - type: glance
          title: Bathroom
          entities:
            - entity: sensor.bathroom_u_humidity
              name: Humidity Z

##### Grond floor
      - type: vertical-stack
        cards:

        - type: 'custom:text-divider-row'
          text: Grond floor

        - type: glance
          title: Foyer
          entities:
            - entity: sensor.foyer_humidity
              name: Hum Z
            - entity: sensor.foyer_temperature
              name: Temp Z
            - entity: light.dev54_2
              tap_action:
                action: toggle
            - entity: binary_sensor.dev54_motion_1
              name: Motion C
            - entity: binary_sensor.dev9_gpio_4
              name: Motion
            - entity: binary_sensor.dev9_gpio_5
              name: Motion D
            - entity: light.dev9
              tap_action:
                action: toggle
              name: Dresser

        - type: glance
          title: Livingarea
          entities: 
            - entity: sensor.livingroom_humidity
              name: Hum Z
            - entity: sensor.livingroom_temperature
              name: Temp Z
            - entity: light.dev1
              tap_action:
                action: toggle
            - entity: light.dev2
              tap_action:
                action: toggle
            - entity: light.dev3
              tap_action:
                action: toggle
              icon: mdi:bowl
              name: Rack
            - entity: light.dev5
              tap_action:
                action: toggle
              name: Table
            - entity: light.dev7
              icon: mdi:lighthouse
              tap_action:
                action: toggle
            - entity: light.dev11
              icon: mdi:lighthouse
              tap_action:
                action: toggle
            - entity: light.dev12
              tap_action:
                action: toggle
            - entity: light.dev14
              tap_action:
                action: toggle
            - entity: light.dev15
              tap_action:
                action: toggle
            - entity: light.dev34
              tap_action:
                action: toggle
#            - entity: light.dev35
#              tap_action:
#                action: toggle
            - binary_sensor.dev15_motion
#          - binary_sensor.dev14_motion

        - type: glance
          title: Bathroom B.
          entities: 
            - entity: sensor.0x00158d00041d6d95_humidity
              name: Hum Z
            - entity: sensor.0x00158d00041d6d95_temperature
              name: Temp Z

        - type: glance
          title: Caro
          entities: 
            - entity: sensor.0x00158d00044af1b0_humidity
              name: Hum Z
            - entity: sensor.0x00158d00044af1b0_temperature
              name: Temp Z


##### cellar
      - type: vertical-stack
        cards:

        - type: 'custom:text-divider-row'
          text: Cellar

        - type: glance
          title: Cellar Hallway
          entities:
            - entity: sensor.dev59_temperature
              name: Temp
            - entity: light.dev59
              tap_action:
                action: toggle
              name: Main
            - entity: binary_sensor.dev59_motion_13
              name: Down
            - entity: binary_sensor.dev59_motion_16
              name: Down 2
            - entity: binary_sensor.dev54_motion_2
              name: Up
          

        - type: glance
          title: Supply
          entities:
            - entity: sensor.0x00158d00041dfcce_humidity
              name: Hum Z
            - entity: sensor.0x00158d00041dfcce_temperature
              name: Temp Z
            - entity: sensor.dhcp_master_kib_sec_received
              name: Download
            - entity: sensor.dhcp_master_kib_sec_sent
              name: Upload
            - sensor.dev16_em_cur


        - type: glance
          title: Cellar Bathroom
          entities:
            - sensor.dev13_adc
            - sensor.dev16_ads_ch0_kw
            - sensor.dev16_ads_ch10_kw


        - type: glance
          title: Movieroom
          entities:
            - entity: sensor.beamer_humidity
              name: Hum Z
            - entity: sensor.beamer_temperature
              name: Temp Z
            - entity: light.dev10
              tap_action:
                action: toggle
              name: LEDs
            - entity: switch.dev25_gpio_4
              state_color: true
              tap_action:
                action: toggle
              name: Main
            - entity: switch.dev60_gpio_12
              state_color: true
              icon: "mdi:air-filter"
              tap_action:
                action: toggle
              name: Vent
            - entity: switch.dev60_gpio_13
              state_color: true
              icon: "mdi:door-open"
              tap_action:
                action: toggle
              name: Window
            - entity: switch.dev60_countdown
              state_color: true
              tap_action:
                action: toggle
              name: AutoV
              icon: "mdi:timer-sand-empty"
            - entity: sensor.dev60_countdown_state
              name: Timer
              icon: "mdi:timer-sand-empty"


        - type: glance
          title: Backdoor
          entities:
            - entity: binary_sensor.dev17_motion
              name: Door
            - entity: camera.cam_dome2
              name: Door Cam


        - type: glance
          title: Workshop
          entities:
            - entity: sensor.0x00158d00044b00e0_humidity 
              name: Hum Z
            - entity: sensor.0x00158d00044b00e0_temperature
              name: Temp Z
            - entity: light.dev20
              tap_action:
                action: toggle
              name: Main
            - entity: light.dev28
              tap_action:
                action: toggle
              name: Bench
            - entity: switch.dev28_gpio_15
              state_color: true
              tap_action:
                action: toggle
              name: Ventilaton
              icon: "mdi:air-filter"
            - entity: switch.dev28_gpio_4
              state_color: true
              tap_action:
                action: toggle
              name: Window
              icon: "mdi:door-open"

          
        - type: glance
          title: Heater
          entities:
            - entity: sensor.dev4_humidity
              name: Humidity
            - entity: switch.dev4_gpio_12
              state_color: true
              name: Pump
              tap_action:
                action: toggle
            - entity:  switch.dev29_gpio_4
              state_color: true
              name: Emu
              tap_action:
                action: toggle
            - entity: binary_sensor.0x00158d0003f85cf0_occupancy
              name: "Motion Z"
            - entity: light.dev35
              state_color: true
              tap_action:
                action: toggle
              name: Main
            - entity: sensor.dev29_temperature
              name: Water
            - entity: switch.dev4_gpio_5
              state_color: true
              icon: "mdi:air-filter"
              tap_action:
                action: toggle
              name: Ventilaton
          
##### Outdoor
      - type: vertical-stack
        cards:
        - type: 'custom:text-divider-row'
          text: Outdoor
        - type: glance
          title: House
          entities:
            - entity: sensor.outside_humidity
              name: Hum Z
            - entity: sensor.outside_temperature
              name: Temp Z
            - entity: camera.cam_xia3
              name: Garage
            - entity: light.dev54_3
              tap_action:
                action: toggle
              name: Corner
            - entity: light.dev54_4
              tap_action:
                action: toggle
              name: Door
            - entity: light.dev18
              tap_action:
                action: toggle
            - entity: camera.cam_dome1
              name: Front
          
        - type: glance
          title: Garage
          state_color: truee
          entities:
            - entity: sensor.dev8_temperature
              name: Temp
            - sensor.dev16_ads_ch8_kw
            - entity: switch.dev8
            - entity: binary_sensor.dev8_motion
              name: Motion

        - type: glance
          title: Garden
          state_color: true
          entities:
            - entity: sensor.dev30_state
            - entity: switch.dev4_gpio_12
              tap_action:
                action: toggle
            - entity: switch.dev30_gpio_2
              tap_action:
                action: toggle
            - entity: switch.dev30_gpio_16
              tap_action:
                action: toggle
            - entity: switch.dev30_gpio_4
              tap_action:
                action: toggle
            - entity: switch.dev30_gpio_5
              tap_action:
                action: toggle
            - entity: switch.dev30_gpio_15
              tap_action:
                action: toggle
            - entity: switch.dev30_gpio_14
              tap_action:
                action: toggle
            - entity: sensor.dev30_uptime
            - sensor.dev16_ads_ch1_kw
            - sensor.dev16_ads_ch2_kw
            - sensor.dev16_ads_ch3_kw

    icon: 'mdi:floor-plan'
    title: All rooms

#################################################
############# cams ##########################
#################################################

  - cards:
      - type: picture-entity
        entity: camera.cam_dome1
        camera_view: live
        name: Door
      - type: picture-entity
        entity: camera.cam_xia3
        camera_view: live
        name: Garage
      - type: picture-entity
        entity: camera.cam_xia1
        camera_view: live
        name: Louisa
#      - type: picture-entity
#        entity: camera.cam_xia5
#        camera_view: live
#      - type: horizontal-stack
#        cards:
#          - icon: 'mdi:arrow-left-bold'
#            name: ' '
#            type: entity-button
#            entity: switch.camxia5_left
#          - icon: 'mdi:arrow-up-bold'
#            name: ' '
#            type: entity-button
#            entity: switch.camxia5_up
#          - icon: 'mdi:arrow-down-bold'
#            name: ' '
#            type: entity-button
#            entity: switch.camxia5_down
#          - icon: 'mdi:arrow-right-bold'
#            name: ' '
#            type: entity-button
#            entity: switch.camxia5_right
#      - type: picture-entity
#        entity: camera.cam_xia1
#      - type: picture-entity
#        entity: camera.cam_xia2
#        camera_view: live
      - type: picture-entity
        entity: camera.cam_xia4
        camera_view: live
        name: Carlo
      - type: picture-entity
        entity: camera.cam_dome2
        camera_view: live
        name: Cellar
#      - type: picture-entity
#        entity: camera.cam_xia52
#        camera_view: live
#      - type: picture-entity
#        entity: camera.pi103
#      - type: picture-entity
#        entity: camera.pi106
    icon: 'mdi:cctv'
    title: Cams

#################################################
################ media control #######################
#################################################

  - cards:
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - icon: 'mdi:power'
                name: All
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.tvoff
                  action: call-service
                entity: binary_sensor.always_on
                state_color: true
              - icon: 'mdi:fire'
                name: FireTV
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.start_fire
                  action: call-service
                entity: binary_sensor.always_on
                state_color: true
              - icon: 'mdi:cast-connected'
                name: Ch TV
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.start_chrom
                  action: call-service
                entity: binary_sensor.always_on
                state_color: true
              - icon: 'mdi:cast-connected'
                name: Ch Audio
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.start_chromaudio
                  action: call-service
                entity: binary_sensor.always_on
                state_color: true
          - type: horizontal-stack
            cards:
              - icon: 'mdi:menu'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.firehome
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
              - icon: 'mdi:arrow-up-bold'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.fireup
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
              - icon: 'mdi:volume-plus'
                name: Amp +2
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.yamaha_vol_up_2
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
              - icon: 'mdi:volume-plus'
                name: Amp +5
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.yamaha_vol_up
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
          - type: horizontal-stack
            cards:
              - icon: 'mdi:arrow-left-bold'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.fireleft
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
              - icon: 'mdi:check-circle'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.fireok
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
              - icon: 'mdi:arrow-right-bold'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.fireright
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
              - icon: 'mdi:arrow-left-circle'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.fireback
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
          - type: horizontal-stack
            cards:
              - icon: 'mdi:volume-mute'
                name: AMP
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.tvmute
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
              - icon: 'mdi:arrow-down-bold'
                name: Fire
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.firedown
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
              - icon: 'mdi:volume-minus'
                name: Amp -2
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.yamaha_vol_down_2
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
              - icon: 'mdi:volume-minus'
                name: Amp -5
                service: script.turn_on
                type: entity-button
                tap_action:
                  service: script.yamaha_vol_down
                  action: call-service
                entity: binary_sensor.harmony
                state_color: true
      - type: horizontal-stack
        cards:
         - type: entity-button
           tap_action:
             action: toggle
           entity: switch.dev58_gpio_12
           icon: 'mdi:download-network'
           name: MediaPC
           state_color: true
         - type: entity-button
           tap_action:
             action: toggle
           state_color: true
           entity: light.dev10
      - type: horizontal-stack
        cards:
         - icon: 'mdi:laptop'
           name: BeamerPc
           service: script.turn_on
           type: entity-button
           tap_action:
             service: script.start_beamer
             action: call-service
           entity: binary_sensor.always_on
           state_color: true
         - icon: 'mdi:power'
           name: BeamerOff
           service: script.turn_on
           type: entity-button
           tap_action:
             service: script.beameroff
             action: call-service
           entity: binary_sensor.harmony_beamer
           state_color: true
      - type: media-control
        entity: media_player.gmusic_player
      - type: media-control
        entity: media_player.jkw_cast2
      - type: custom:group-card
        card:
           type: entities 
           title: GMusic
        group: group.google_music_media_player
        show_header_toggle: false
    icon: 'mdi:cast-connected'
    title: Media

#################################################
############## weather #########################
#################################################

  - cards:
      - type: vertical-stack
        cards:
        - type: horizontal-stack
          cards:
           - entity: sensor.outside_humidity
             name: Outside
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.bathroom_u_humidity
             name: Bathroom U.
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.carlo_humidity
             name: Carlo
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
        - type: horizontal-stack
          cards:
           - entity: sensor.beamer_humidity
             name: Beamer
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.livingroom_humidity
             type: gauge
             name: Livingroom
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.foyer_humidity
             type: gauge
             name: Foyer
             severity:
               green: 0
               yellow: 0
               red: 60
        - type: horizontal-stack
          cards:
           - entity: sensor.0x00158d00041024ef_humidity
             name: L
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.0x00158d00041dfcce_humidity
             type: gauge
             name: Supply
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.0x00158d00042505f7_humidity
             type: gauge
             name: Bedroom
             severity:
               green: 0
               yellow: 0
               red: 60
        - type: horizontal-stack
          cards:
           - entity: sensor.0x00158d00041d6d95_humidity
             name: Bathroom B.
             type: gauge
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.0x00158d00044af1b0_humidity
             type: gauge
             name: Caro
             severity:
               green: 0
               yellow: 0
               red: 60
           - entity: sensor.0x00158d00044b00e0_humidity
             type: gauge
             name: Workshop
             severity:
               green: 0
               yellow: 0
               red: 60

      - type: entities
        entities:
         - entity: sensor.bathroom_u_temperature
           name: "Bathroom Z."
         - entity: sensor.carlo_temperature
           name: "Carlo Z."
         - entity: sensor.dev32_temperature
           name: "Bedroom"
         - entity: sensor.0x00158d00042505f7_temperature
           name: "Bedroom Z."
         - entity: sensor.dev55_temperature
           name: "Louisa"
         - entity: sensor.0x00158d00041024ef_temperature
           name: "Louisa Z"
         - type: divider
         - entity: sensor.livingroom_temperature
           name: "Livingroom Z."
         - entity: sensor.dev1_temperature
           name: "Livingroom 2"
         - entity: sensor.dev2_temperature
           name: "Livingroom 3"
         - entity: sensor.foyer_temperature
           name: "Foyer Z."
         - entity: sensor.0x00158d00044af1b0_temperature
           name: "Caro Z."
         - entity: sensor.0x00158d00041d6d95_temperature
           name: Bathroom B. Z.
         - type: divider
         - entity: sensor.dev59_temperature
           name: "Cellar"
         - entity: sensor.beamer_temperature
           name: "Beamer Z."
         - entity: sensor.0x00158d00041dfcce_temperature
           name: "Supply Z."
         - entity: sensor.0x00158d00044b00e0_temperature
           name: "Workshop Z."
         - type: divider
         - entity: sensor.outside_temperature


      - type: weather-forecast
        entity: weather.dark_sky
      - type: horizontal-stack
        cards:
         - detail: 2
           graph: line
           entity: sensor.outside_temperature
           name: Outside
           type: sensor 
         - detail: 2
           graph: line
           entity: sensor.dev8_temperature
           name: Garage
           type: sensor 

      - type: horizontal-stack
        cards:
         - detail: 2
           graph: line
           entity: sensor.carlo_temperature
           name: Carlo
           type: sensor 
         - detail: 2
           graph: line
           entity: sensor.livingroom_temperature
           name: Livingroom
           type: sensor 
      - type: horizontal-stack
        cards:
         - detail: 2
           graph: line
           entity: sensor.beamer_temperature
           name: Beamer
           type: sensor 
         - detail: 2
           graph: line
           entity: sensor.foyer_temperature
           name: Foyer
           type: sensor 

#      - type: vertical-stack
#        cards:
#         - type: history-graph
#           entities:
#             - sensor.dev59_temperature
#             - sensor.dev1_temperature
#             - sensor.dev2_temperature
#             - sensor.foyer_temperature
#             - sensor.livingroom_temperature
#             - sensor.bathroom_u_temperature
#             - sensor.beamer_temperature
#             - sensor.carlo_temperature
#             - sensor.dev32_temperature
#             - sensor.dev55_temperature

      - type: picture-entity
        entity: camera.cam_weather2
        name: NDS
        camera_view: live
      - type: picture-entity
        entity: camera.cam_weather1
        name: BRD
        camera_view: live
    icon: 'mdi:weather-partly-cloudy'
    title: weather
#################################################
############## security #########################
#################################################
  - cards:
      - type: entities
        show_header_toggle: false
        entities:
          - entity: binary_sensor.sec_short
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.sec_long ]]"
            icon: mdi:lock
            name: System status
            state_color: true
          - type: divider
          - input_boolean.alarm_system
          - input_boolean.presents_simulation
          - type: divider
          - binary_sensor.someone_is_home
          - binary_sensor.everyone_is_home
          - entity: device_tracker.illuminum_kolja
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.illuminum_kolja_t ]]"
            icon: mdi:security
          - entity: device_tracker.illuminum_caro
            type: "custom:secondaryinfo-entity-row"
            secondary_info: "[[ sensor.illuminum_caro_t ]]"
            icon: mdi:security
        title: Alarm Status
      - type: entities
        show_header_toggle: false
        entities:
             - entity: binary_sensor.g_motion
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_t ]]"
               icon: mdi:security
               name: Global motion
             - type: divider
             - entity: binary_sensor.g_motion_upstairs
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_upstairs_t ]]"
               icon: mdi:home-floor-1
               name: Upstairs
             - entity: binary_sensor.g_motion_basement
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_basement_t ]]"
               icon: mdi:home-floor-0
               name: Ground floor
             - entity: binary_sensor.g_motion_cellar
               type: "custom:secondaryinfo-entity-row"
               secondary_info: "[[ sensor.g_motion_cellar_t ]]"
               icon: mdi:home-floor-negative-1
               name: Basement
      - type: entities
        show_header_toggle: false
        state_color: true
        entities:
          - binary_sensor.dev57_motion
          - entity: binary_sensor.0x00158d0002f0bc08_occupancy
            name: "Hallway U"
          - type: divider
#          - binary_sensor.dev14_motion
          - entity: binary_sensor.dev54_motion_1
            name: "Foyer ceiling motion"
          - binary_sensor.dev15_motion
          - binary_sensor.dev9_gpio_4
          - type: divider
          - binary_sensor.dev17_motion
          - entity: binary_sensor.dev54_motion_2
            name: "Cellar stair motion"
          - binary_sensor.dev59_motion_13
          - binary_sensor.dev59_motion_16
          - binary_sensor.0x00158d0003f85cf0_occupancy
          - type: divider
          - binary_sensor.dev8_motion
#          - binary_sensor.dev10_motion
      - type: map
        entities:
          - entity: device_tracker.illuminum_kolja
          - entity: device_tracker.illuminum_caro
          - zone.home
        aspect_ratio: 90%
    icon: 'mdi:security'
    title: Security

#################################################
########### Utilities ###########################
#################################################

  - cards:
#      - type: entities
#        entities:
#          - light.dev54_3
#          - light.dev54_4
#          - light.dev18
#        show_header_toggle: false
#        title: Outside light
      - type: entities
        entities:
          - vacuum.xiaomi_vacuum_cleaner
          - vacuum.xiaomi_vacuum_cleaner_2
          - input_boolean.cleaning_done_today_0
          - input_boolean.cleaning_done_today_1
          - sensor.vac_triggered_0
          - sensor.vac_triggered_1
          - input_boolean.autostart_cleaning
        show_header_toggle: false
        title: Vacuuming

      - type: history-graph
        entities:
          - sensor.dev29_temperature

      - type: entities
        entities:
          - sensor.ics_1
          - sensor.ics_2
          - sensor.ics_3
        title: Trash

      - type: entities
        entities:
          - sensor.ics_4
          - sensor.ics_5
          - sensor.ics_6
        title: Holidays

      - type: entities
        entities:
          - input_boolean.irrigation
          - input_boolean.irrigation_override
          - sensor.dev30_state
          - switch.dev4_gpio_12
          - switch.dev30_gpio_2
          - switch.dev30_gpio_16
          - switch.dev30_gpio_4
          - switch.dev30_gpio_5
          - switch.dev30_gpio_15
          - switch.dev30_gpio_14
          - sensor.dev30_uptime
          - sensor.dark_sky_daytime_high_temperature_0d
        show_header_toggle: false
        title: Water

      - detail: 2
        graph: line
        entity: sensor.dev4_humidity
        name: Cellar Humidity
        type: sensor 

      - detail: 2
        graph: line
        entity: sensor.dev4_humidity_stat_mean
        name: Cellar Humidity
        type: sensor 

      - entities: 
          - entity: switch.dev4_gpio_5
            name: Dryroom
          - entity: switch.dev28_gpio_15
            name: Shop
          - entity: switch.dev60_gpio_12
            name: Beamer
        title: Ventilation
        type: history-graph

      - type: horizontal-stack
        cards:
          - type: entity-button
            tap_action:
              action: toggle
            entity: switch.dev28_countdown
            icon: 'mdi:clock'
            state_color: true
            name: Shop 30min
          - type: entity-button
            tap_action:
              action: toggle
            entity: switch.dev28_countdown_l
            icon: 'mdi:clock'
            state_color: true
            name: Shop Long
          - entity: sensor.dev28_countdown_state
            name: Countdown
            type: gauge
            max: 30

    icon: 'mdi:tools'
    title: Tools
#################################################
########## upstairs #############################
#################################################
#  - cards:
#      - type: custom:group-card
#        card:
#           type: entities 
#           title: Switch on IOT1
#        group: group.iot1_switch
#
#      - type: custom:group-card
#        card:
#           type: entities 
#           title: Light on IOT1
#        group: group.iot1_light
#
#    icon: 'mdi:home-floor-1'
#    title: upstairs
#################################################
############ Grond floor ###########################
#################################################
#  - cards:
#      - type: custom:group-card
#        card:
#           type: entities 
#           title: Switch on IOT0
#        group: group.iot0_switch
#
#      - type: custom:group-card
#        card:
#           type: entities 
#           title: Light on IOT0
#        group: group.iot0_light
#
#    icon: 'mdi:home-floor-0'
#    title: Grond floor
#################################################
########## cellar ###############################
#################################################
#  - cards:
#      - type: custom:group-card
#        card:
#           type: entities 
#           title: Switch on IOT255
#        group: group.iot255_switch
#
#      - type: custom:group-card
#        card:
#           type: entities 
#           title: Light on IOT255
#        group: group.iot255_light
#
#    icon: 'mdi:home-floor-negative-1'
#    title: cellar
