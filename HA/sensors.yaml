  - platform: time_date
    display_options:
      - 'time'
# -----------------------------------------------------------
# ------------- GMOTION -------------------------------------
# -----------------------------------------------------------
  - platform: template
    sensors:
      g_motion_t:
        value_template: >-
          {%- if is_state("binary_sensor.g_motion","on") -%}
          0
          {%- else -%}
          {{ (( as_timestamp(now()) - as_timestamp(states.binary_sensor.g_motion.last_updated)) //60) | int }}
          {%- endif %}
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time
# -----------------------------------------------------------
# -------------- TRAVELTIME ---------------------------------
# -----------------------------------------------------------

  - platform: google_travel_time
    name: To_Hannover
    api_key: !secret gmaps_api_key
    origin: Wienhausen
    destination: Uni, Hannover

  - platform: google_travel_time
    name: To_Baker
    api_key: !secret gmaps_api_key
    origin: Wienhausen, Muehlenstr 8a
    destination: Baker Hughes, Celle
# -----------------------------------------------------------
# --------------- MQTT --------------------------------------
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev1_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev1.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev1/#"
    name: "dev1"

  - platform: mqtt
    state_topic: "dev1/temperature_DS"
    name: "dev1_temperature"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev1/rssi"
    name: "dev1_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev2_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev2.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev2/#"
    name: "dev2"

  - platform: mqtt
    state_topic: "dev2/temperature_DS"
    name: "dev2_temperature"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev2/rssi"
    name: "dev2_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev3_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev3.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev3/#"
    name: "dev3"

  - platform: mqtt
    state_topic: "dev3/temperature_DHT"
    name: "dev3_temperature"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev3/humidity_DHT"
    name: "dev3_humidity"
    unit_of_measurement: "%"

  - platform: mqtt
    state_topic: "dev3/rssi"
    name: "dev3_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev4_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev4.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev4/#"
    name: "dev4"

  - platform: mqtt
    state_topic: "dev4/temperature_DS"
    name: "dev4_temperature"
    sensor_class: "temperature"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev4/rssi"
    name: "dev4_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev5_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev5.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev5/#"
    name: "dev5"

  - platform: mqtt
    state_topic: "dev5/rssi"
    name: "dev5_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev7_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev7.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev7/#"
    name: "dev7"

  - platform: mqtt
    state_topic: "dev7/temperature_DS"
    name: "dev7_temperature"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev7/rssi"
    name: "dev7_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev8_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev8.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev8/#"
    name: "dev8"

  - platform: mqtt
    state_topic: "dev8/rssi"
    name: "dev8_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev9_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev9.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev9/#"
    name: "dev9"

  - platform: mqtt
    state_topic: "dev9/temperature_DS"
    name: "dev9_temperature"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev9/humidity_DHT"
    name: "dev9_humidity_DHT"
    unit_of_measurement: "%"

  - platform: mqtt
    state_topic: "dev9/temperature_DHT"
    name: "dev9_temperature_DHT"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev9/rssi"
    name: "dev9_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev10_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev10.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev10/#"
    name: "dev10"

  - platform: mqtt
    state_topic: "dev10/temperature_DS"
    name: "dev10_temperature"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev10/rssi"
    name: "dev10_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev11_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev11.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev11/#"
    name: "dev11"

  - platform: mqtt
    state_topic: "dev11/temperature_DS"
    name: "dev11_temperature"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev11/rssi"
    name: "dev11_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev13_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev13.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev13/#"
    name: "dev13"

  - platform: mqtt
    state_topic: "dev13/temperature_DS"
    name: "dev13_temperature"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev13/rssi"
    name: "dev13_rssi"
    unit_of_measurement: "dbm"

  - platform: mqtt
    state_topic: "dev13/adc"
    name: "dev13_adc"
    sensor_class: "temperature"
    unit_of_measurement: "ºC"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev14_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev14.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev14/#"
    name: "dev14"

  - platform: mqtt
    state_topic: "dev14/rssi"
    name: "dev14_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev15_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev15.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev15/#"
    name: "dev15"

  - platform: mqtt
    state_topic: "dev15/rssi"
    name: "dev15_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev16_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev16.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev16/#"
    name: "dev16"

  - platform: mqtt
    state_topic: "dev16/temperature_DS"
    name: "dev16_temperature"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev16/rssi"
    name: "dev16_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev17_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev17.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev17/#"
    name: "dev17"

  - platform: mqtt
    state_topic: "dev17/rssi"
    name: "dev17_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev18_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev18.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev18/#"
    name: "dev18"

  - platform: mqtt
    state_topic: "dev18/rssi"
    name: "dev18_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev20_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev20.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev20/#"
    name: "dev20"

  - platform: mqtt
    state_topic: "dev20/rssi"
    name: "dev20_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev21_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev21.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev21/#"
    name: "dev21"

  - platform: mqtt
    state_topic: "dev21/rssi"
    name: "dev21_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: mqtt
    state_topic: "dev42/temperature_DS"
    name: "dev42_temperature"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev42/rssi"
    name: "dev42_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev55_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev55.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev55/#"
    name: "dev55"

  - platform: mqtt
    state_topic: "dev55/rssi"
    name: "dev55_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev56_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev56.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev56/#"
    name: "dev56"

  - platform: mqtt
    state_topic: "dev56/rssi"
    name: "dev56_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: template
    sensors:
      dev77_update:
        value_template: '{{ (( as_timestamp(now()) - as_timestamp(states.sensor.dev77.last_updated)) //60) | int }}'
        unit_of_measurement: 'min'
        entity_id:
         - sensor.time

  - platform: mqtt
    state_topic: "dev77/#"
    name: "dev77"

  - platform: mqtt
    state_topic: "dev77/temperature_DHT"
    name: "dev77_temperature_dht"
    unit_of_measurement: "ºC"

  - platform: mqtt
    state_topic: "dev77/humidity_DHT"
    name: "dev77_humidity_dht"
    unit_of_measurement: "%"

  - platform: mqtt
    state_topic: "dev77/rssi"
    name: "dev77_rssi"
    unit_of_measurement: "dbm"
# -----------------------------------------------------------
  - platform: mqtt
    state_topic: "dev99/temperature_DS"
    name: "dev99_temperature"
    sensor_class: "temperature"
    unit_of_measurement: "ºC"
# -----------------------------------------------------------
  - platform: darksky
    api_key: !secret darksky_key
    monitored_conditions:
      - temperature_max
      - temperature_min
      - precip_intensity
      - precip_probability
      - temperature
      - apparent_temperature
      - cloud_cover
      - daily_summary
#      - summary
#      - icon
#      - precip_type
#      - wind_speed
#      - wind_bearing
#      - humidity
#      - visibility
#      - apparent_temperature_max
#      - apparent_temperature_min
#      - precip_intensity_max
# -----------------------------------------------------------
  - platform: systemmonitor
    resources:
      - type: disk_use_percent
        arg: /home
      - type: memory_free
      - type: processor_use
# -----------------------------------------------------------
